<!DOCTYPE html>
<meta charset="utf-8">
<style>
rect {
  stroke: #fff;
}
</style>
<body></body>

<script src="jquery/dist/jquery.js"></script>
<script src="//d3js.org/d3.v3.min.js"></script>
<script src="underscore/underscore-min.js"></script>

<script>
$.get("data/wordsemantics-2.20-json.txt",function(txt){
    var lines = txt.split("\n");
    console.log(lines.length);
    for (var i = 0, len = lines.length; i < len; i++) {
    	line = lines[i];
    	lastindex = line.lastIndexOf('\}')
    	if(line.substring(lastindex-2, lastindex+1) !=='[]}'){
    		line = line.slice(0, -3)+'}]}';  
    		index0 = line.indexOf('derivedFrom');
    		if(index0!=-1){
    			index = line.indexOf('\]',index0);
	    		if(index!=-1 && line[index-1]!=='['){
	    			line = line.substr(0, index) + '"' + line.substr(index);
	    		}
    		}
    		groupindex = 0;
    		while(line.indexOf("\{grouping", groupindex)!==-1){
    			groupindex = line.indexOf("\{grouping", groupindex);
    			line = line.substr(0, groupindex+1) + '"' + line.substr(groupindex+1);
    		}
    	}
    	jsonSemantics = $.parseJSON(line);
        console.log(jsonSemantics.label);
    }
});	

</script>